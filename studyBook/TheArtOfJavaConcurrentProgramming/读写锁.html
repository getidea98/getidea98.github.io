<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è¯»å†™é” | getidea98</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="ä¸ªäººåšå®¢">
    
    <link rel="preload" href="/assets/css/0.styles.7f84f354.css" as="style"><link rel="preload" href="/assets/js/app.10cb8224.js" as="script"><link rel="preload" href="/assets/js/2.74aa129f.js" as="script"><link rel="preload" href="/assets/js/32.77b782f6.js" as="script"><link rel="prefetch" href="/assets/js/10.dadb40c9.js"><link rel="prefetch" href="/assets/js/11.cf4190a3.js"><link rel="prefetch" href="/assets/js/12.0824368c.js"><link rel="prefetch" href="/assets/js/13.9bf75953.js"><link rel="prefetch" href="/assets/js/14.94f39f3c.js"><link rel="prefetch" href="/assets/js/15.66b03d5f.js"><link rel="prefetch" href="/assets/js/16.bf2ec8b1.js"><link rel="prefetch" href="/assets/js/17.185e3bce.js"><link rel="prefetch" href="/assets/js/18.8e115374.js"><link rel="prefetch" href="/assets/js/19.0f1a594a.js"><link rel="prefetch" href="/assets/js/20.b52cba55.js"><link rel="prefetch" href="/assets/js/21.a70fb2fa.js"><link rel="prefetch" href="/assets/js/22.c9eade7d.js"><link rel="prefetch" href="/assets/js/23.27964abf.js"><link rel="prefetch" href="/assets/js/24.7e7113f1.js"><link rel="prefetch" href="/assets/js/25.76d5253a.js"><link rel="prefetch" href="/assets/js/26.a22db28f.js"><link rel="prefetch" href="/assets/js/27.be3b5979.js"><link rel="prefetch" href="/assets/js/28.ccb2467c.js"><link rel="prefetch" href="/assets/js/29.c2c97391.js"><link rel="prefetch" href="/assets/js/3.ed25f37c.js"><link rel="prefetch" href="/assets/js/30.dd5a03c2.js"><link rel="prefetch" href="/assets/js/31.2a1a51a4.js"><link rel="prefetch" href="/assets/js/33.d09b68b5.js"><link rel="prefetch" href="/assets/js/34.93280e54.js"><link rel="prefetch" href="/assets/js/4.f154c237.js"><link rel="prefetch" href="/assets/js/5.9824d715.js"><link rel="prefetch" href="/assets/js/6.3205172c.js"><link rel="prefetch" href="/assets/js/7.a0f0b63a.js"><link rel="prefetch" href="/assets/js/8.173a1f72.js"><link rel="prefetch" href="/assets/js/9.d82ab73f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f84f354.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cn.vuejs.org/images/logo.svg" alt="getidea98" class="logo"> <span class="site-name can-hide">getidea98</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/computerLearningNotes/Java/ArrayList/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/DesignPattern.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></div><div class="nav-item"><a href="/computerBase/Linux.html" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">è¯»ä¹¦ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">è¯»ä¹¦ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyBook/TheArtOfJavaConcurrentProgramming/" class="nav-link router-link-active">
  Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/computerLearningNotes/Java/ArrayList/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/DesignPattern.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></div><div class="nav-item"><a href="/computerBase/Linux.html" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">è¯»ä¹¦ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">è¯»ä¹¦ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyBook/TheArtOfJavaConcurrentProgramming/" class="nav-link router-link-active">
  Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>The Art Of Java Concurrent Programming</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/" aria-current="page" class="sidebar-link">Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/AQS.html" class="sidebar-link">AQS</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/AQS-å…±äº«å¼.html" class="sidebar-link">AQS-å…±äº«å¼</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/AQS-ç‹¬å å¼.html" class="sidebar-link">AQS-ç‹¬å å¼</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/AQS-ç‹¬å å¼è¶…æ—¶.html" class="sidebar-link">AQS-ç‹¬å å¼è¶…æ—¶</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/Javaä¸­çš„çº¿ç¨‹æ± .html" class="sidebar-link">Javaä¸­çš„çº¿ç¨‹æ± </a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶.html" class="sidebar-link">Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/Lockæ¥å£.html" class="sidebar-link">Lockæ¥å£</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/volatileçš„åº•å±‚å®ç°.html" class="sidebar-link">Volatileçš„åº•å±‚å®ç°</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/ä¸Šä¸‹æ–‡åˆ‡æ¢.html" class="sidebar-link">ä¸Šä¸‹æ–‡åˆ‡æ¢</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/åˆ©ç”¨AQSå®ç°è‡ªå®šä¹‰ç»„ä»¶.html" class="sidebar-link">åˆ©ç”¨AQSå®ç°è‡ªå®šä¹‰ç»„ä»¶</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/åŸå­æ“ä½œ.html" class="sidebar-link">åŸå­æ“ä½œ</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/å¹¶å‘ç¼–ç¨‹æ¨¡å‹.html" class="sidebar-link">å¹¶å‘ç¼–ç¨‹æ¨¡å‹</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/çº¿ç¨‹é—´é€šè®¯-ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€thread.join().html" class="sidebar-link">çº¿ç¨‹é—´é€šè®¯-ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€thread.join()</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/è¯»å†™é”.html" class="active sidebar-link">è¯»å†™é”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/studyBook/TheArtOfJavaConcurrentProgramming/è¯»å†™é”.html#å†™é”çš„è·å–ä¸é‡Šæ”¾" class="sidebar-link">å†™é”çš„è·å–ä¸é‡Šæ”¾</a></li><li class="sidebar-sub-header"><a href="/studyBook/TheArtOfJavaConcurrentProgramming/è¯»å†™é”.html#è¯»é”çš„è·å–ä¸é‡Šæ”¾" class="sidebar-link">è¯»é”çš„è·å–ä¸é‡Šæ”¾</a></li></ul></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/é‡å…¥é”ReentrantLock.html" class="sidebar-link">é‡å…¥é”ReentrantLock</a></li><li><a href="/studyBook/TheArtOfJavaConcurrentProgramming/é”é™çº§ä¸Conditionæ¥å£.html" class="sidebar-link">é”é™çº§ä¸Conditionæ¥å£</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="header-anchor">#</a> è¯»å†™é”</h1> <p>è¯»å†™é”ä¾èµ–AQSæ¥å®ç°åŒæ­¥åŠŸèƒ½ï¼Œè€Œè¯»å†™çŠ¶æ€å°±æ˜¯AQSçš„<code>state</code>ã€‚</p> <p>ä¸€ä¸ªæ•´å½¢å˜é‡åŒæ—¶ç»´æŠ¤ç€è¯»å†™çŠ¶æ€ï¼Œå¿…ç„¶éœ€è¦å°†å…¶â€œæŒ‰ä½åˆ‡å‰²ä½¿ç”¨â€</p> <p><img src="/imgs/TheArtOfJavaConcurrentProgramming/%E8%AF%BB%E5%86%99%E9%94%811.png" alt="è¯»å†™é”çŠ¶æ€çš„åˆ’åˆ†æ–¹å¼"></p> <p>è¯»å†™é”çŠ¶æ€çš„åˆ’åˆ†æ–¹å¼</p> <p>çŠ¶æ€çš„åˆ’åˆ†èƒ½å¾—å‡ºä¸€ä¸ªæ¨è®ºï¼šé«˜ä½ä¸ç­‰äº0æ—¶ï¼Œå½“å†™çŠ¶æ€ï¼ˆS&amp;0x0000FFFFï¼‰ç­‰äº0æ—¶ï¼Œåˆ™è¯»çŠ¶æ€å¤§äº0ï¼Œå³è¯»é”å·²è¢«è·å–ã€‚</p> <h2 id="å†™é”çš„è·å–ä¸é‡Šæ”¾"><a href="#å†™é”çš„è·å–ä¸é‡Šæ”¾" class="header-anchor">#</a> <strong>å†™é”çš„è·å–ä¸é‡Šæ”¾</strong></h2> <p>é¦–å…ˆåˆ¤æ–­çŠ¶æ€ä¸ç­‰äº0ï¼Œåˆ™è§†ä¸ºå½“å‰é”è¢«è·å–äº†ã€‚ä¸çŸ¥é“æ˜¯è¯»é”è·å–è¿˜æ˜¯å†™é”è¢«è·å–ã€‚</p> <p>éšååˆ¤æ–­å†™é”æ˜¯ä¸æ˜¯0ï¼ˆ0ä»£è¡¨å†™é”è·å–ï¼Œä¹Ÿå°±æ˜¯å½“å‰çš„è¯»é”è¢«è·å–äº†ã€‚ï¼‰ï¼Œå¦‚æœå†™é”è¢«è·å–ï¼Œå¹¶ä¸”ç‹¬å çš„çº¿ç¨‹æ˜¯è‡ªèº«ï¼Œåˆ™è§†ä¸ºè‡ªå·±å†æ¬¡è·å–åˆ°è¯»é”ã€‚</p> <p>é™¤æ­¤ä¹‹å¤–ï¼Œè§†ä¸ºè·å–é”å¤±è´¥éƒ½æ˜¯è·å–é”å¤±è´¥ã€‚</p> <aside>
ğŸ’¡ æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼Œå†™é”æ‰èƒ½è·å–åŒæ­¥çŠ¶æ€ï¼š
1. åŒæ­¥çŠ¶æ€æ˜¯0ï¼Œè§†ä¸ºæ²¡æœ‰ä»»ä½•çº¿ç¨‹æŒæœ‰é”ã€‚
2.åŒæ­¥çŠ¶æ€ä¸æ˜¯0ï¼ŒåŒæ—¶stateä½ä½ä¸æ˜¯0ï¼ˆè¢«è·å–å†™é”ï¼‰ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ˜¯è‡ªèº«ã€‚
</aside> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">tryAcquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> acquires<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span><span class="token function">exclusiveCount</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// (Note: if c != 0 and w == 0 then shared count != 0)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> current <span class="token operator">!=</span> <span class="token function">getExclusiveOwnerThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">+</span><span class="token function">exclusiveCount</span><span class="token punctuation">(</span>acquires<span class="token punctuation">)</span> <span class="token operator">&gt;</span>MAX_COUNT<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Maximum lock count exceeded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Reentrant acquire</span>
        <span class="token function">setState</span><span class="token punctuation">(</span>c <span class="token operator">+</span> acquires<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">writerShouldBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token operator">!</span><span class="token function">compareAndSetState</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> c <span class="token operator">+</span> acquires<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">setExclusiveOwnerThread</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„âš ï¸ï¼šc == 0 çš„åˆ†æ”¯ï¼Œæœ‰ä¸€ä¸ªwriterShouldBlock()ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å…¬å¹³æˆ–éå…¬å¹³è·å–é”çš„æ ¸å¿ƒã€‚</p> <h2 id="è¯»é”çš„è·å–ä¸é‡Šæ”¾"><a href="#è¯»é”çš„è·å–ä¸é‡Šæ”¾" class="header-anchor">#</a> è¯»é”çš„è·å–ä¸é‡Šæ”¾</h2> <p>å¦‚æœå…¶ä»–çº¿ç¨‹å·²ç»è·å–äº†å†™é”ï¼Œåˆ™å½“å‰çº¿ç¨‹è·å–è¯» é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚å¦‚æœå½“å‰çº¿ç¨‹è·å–äº†å†™é”æˆ–è€…å†™é”æœªè¢«è·å–ï¼Œåˆ™å½“å‰çº¿ç¨‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œ ä¾é CASä¿è¯ï¼‰å¢åŠ è¯»çŠ¶æ€ï¼ŒæˆåŠŸè·å–è¯»é”ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">tryAcquireShared</span><span class="token punctuation">(</span><span class="token keyword">int</span> unused<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
     * Walkthrough:
     * 1. If write lock held by another thread, fail.
     * 2. Otherwise, this thread is eligible for
     *    lock wrt state, so ask if it should block
     *    because of queue policy. If not, try
     *    to grant by CASing state and updating count.
     *    Note that step does not check for reentrant
     *    acquires, which is postponed to full version
     *    to avoid having to check hold count in
     *    the more typical non-reentrant case.
     * 3. If step 2 fails either because thread
     *    apparently not eligible or CAS fails or count
     *    saturated, chain to version with full retry loop.
     */</span>
    <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">exclusiveCount</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
        <span class="token function">getExclusiveOwnerThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> current<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> r <span class="token operator">=</span><span class="token function">sharedCount</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">readerShouldBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        r <span class="token operator">&lt;</span>MAX_COUNT<span class="token operator">&amp;&amp;</span>
        <span class="token function">compareAndSetState</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> c <span class="token operator">+</span>SHARED_UNIT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            firstReader <span class="token operator">=</span> current<span class="token punctuation">;</span>
            firstReaderHoldCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>firstReader <span class="token operator">==</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            firstReaderHoldCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">HoldCounter</span> rh <span class="token operator">=</span> cachedHoldCounter<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rh <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> rh<span class="token punctuation">.</span>tid <span class="token operator">!=</span><span class="token function">getThreadId</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span>
                cachedHoldCounter <span class="token operator">=</span> rh <span class="token operator">=</span> readHolds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rh<span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                readHolds<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>rh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            rh<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">fullTryAcquireShared</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/studyBook/TheArtOfJavaConcurrentProgramming/çº¿ç¨‹é—´é€šè®¯-ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€thread.join().html" class="prev">
        çº¿ç¨‹é—´é€šè®¯-ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€thread.join()
      </a></span> <span class="next"><a href="/studyBook/TheArtOfJavaConcurrentProgramming/é‡å…¥é”ReentrantLock.html">
        é‡å…¥é”ReentrantLock
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.10cb8224.js" defer></script><script src="/assets/js/2.74aa129f.js" defer></script><script src="/assets/js/32.77b782f6.js" defer></script>
  </body>
</html>
